================================================================================
ğŸ›’ INTEGRACJA Z WOOCOMMERCE - INSTRUKCJA KROK PO KROKU
================================================================================

ğŸ“ TWOJA KONFIGURACJA:
----------------------
âœ… Sekret:     wc_secret_715a8339c6ae64451fca0b5348a57f4a
âœ… TwÃ³j IP:    192.168.0.108
âœ… Port:       5001
âœ… URL:        http://192.168.0.108:5001

================================================================================
KROK 1: KONFIGURACJA WEBHOOKA W WOOCOMMERCE
================================================================================

1. Zaloguj siÄ™ do WordPress (panel administracyjny)

2. PrzejdÅº do:
   WooCommerce â†’ Ustawienia â†’ Zaawansowane â†’ Webhooks

3. Kliknij: "Dodaj webhook"

4. WypeÅ‚nij formularz:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Nazwa:                                                          â”‚
   â”‚ Magazyn - Aktualizacja stanÃ³w                                  â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Status:                                                         â”‚
   â”‚ â˜‘ Aktywny                                                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Temat (Topic):                                                  â”‚
   â”‚ Order completed  â—„â”€â”€ Wybierz z listy                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ URL dostarczenia (Delivery URL):                               â”‚
   â”‚ http://192.168.0.108:5001/api/woocommerce/webhook              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Sekret (Secret):                                                â”‚
   â”‚ wc_secret_715a8339c6ae64451fca0b5348a57f4a                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Wersja API:                                                     â”‚
   â”‚ WP REST API Integration v3  â—„â”€â”€ Wybierz z listy               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Kliknij: "Zapisz webhook"

================================================================================
KROK 2: ZNAJDÅ¹ ID PRODUKTÃ“W WOOCOMMERCE
================================================================================

W WordPress:

1. PrzejdÅº do: Produkty â†’ Wszystkie produkty

2. NajedÅº myszkÄ… na produkt (NIE KLIKAJ!)

3. W dolnym lewym rogu przeglÄ…darki zobaczysz:
   post.php?post=123&action=edit
                  ^^^
                  To jest ID produktu!

4. Zapisz ID wszystkich produktÃ³w, ktÃ³re chcesz synchronizowaÄ‡

   PrzykÅ‚ad:
   - Przyprawa do kurczaka    â†’ ID: 456
   - Przyprawa do ziemniakÃ³w  â†’ ID: 789

================================================================================
KROK 3: ZNAJDÅ¹ ID PRODUKTÃ“W MAGAZYNOWYCH
================================================================================

W terminalu wykonaj:

   curl http://localhost:5001/api/produkty

Zobaczysz listÄ™ produktÃ³w:

   [
     {
       "id": 1,                    â—„â”€â”€ To jest ID magazynowe
       "nazwa": "KuraLover",
       "stan_magazynowy": 0
     },
     {
       "id": 2,                    â—„â”€â”€ To jest ID magazynowe
       "nazwa": "Ziemniak Rulezzz",
       "stan_magazynowy": 4
     }
   ]

Zapisz ID produktÃ³w magazynowych.

================================================================================
KROK 4: DODAJ MAPOWANIA PRODUKTÃ“W
================================================================================

METODA A: UÅ¼yj skryptu pomocniczego (ÅATWIEJSZE)
-------------------------------------------------

W terminalu wykonaj:

   ./dodaj_mapowanie.sh

Skrypt pokaÅ¼e listÄ™ produktÃ³w i zapyta o ID.

METODA B: RÄ™cznie przez curl
-----------------------------

Dla kaÅ¼dego produktu wykonaj:

   curl -X POST http://localhost:5001/api/woocommerce/mapowania \
     -H "Content-Type: application/json" \
     -d '{
       "woocommerce_product_id": 456,
       "produkt_id": 1
     }'

Gdzie:
- 456 = ID produktu w WooCommerce
- 1   = ID produktu w magazynie

PRZYKÅAD:
---------

JeÅ›li masz:
- WooCommerce: "Przyprawa do kurczaka" (ID: 456)
- Magazyn:     "KuraLover" (ID: 1)

Wykonaj:

   curl -X POST http://localhost:5001/api/woocommerce/mapowania \
     -H "Content-Type: application/json" \
     -d '{"woocommerce_product_id": 456, "produkt_id": 1}'

================================================================================
KROK 5: SPRAWDÅ¹ MAPOWANIA
================================================================================

W terminalu wykonaj:

   curl http://localhost:5001/api/woocommerce/mapowania

PowinieneÅ› zobaczyÄ‡ listÄ™ mapowaÅ„:

   [
     {
       "id": 1,
       "woocommerce_product_id": 456,
       "produkt_id": 1,
       "produkt_nazwa": "KuraLover"
     }
   ]

================================================================================
KROK 6: TESTOWANIE
================================================================================

TEST 1: ZÅ‚Ã³Å¼ testowe zamÃ³wienie
--------------------------------

1. OtwÃ³rz swÃ³j sklep WooCommerce
2. Dodaj produkt do koszyka
3. ZÅ‚Ã³Å¼ zamÃ³wienie
4. OpÅ‚aÄ‡ zamÃ³wienie (lub oznacz jako opÅ‚acone w panelu)
5. **WAÅ»NE:** Oznacz zamÃ³wienie jako "UkoÅ„czone"

TEST 2: SprawdÅº czy stan siÄ™ zmniejszyÅ‚
----------------------------------------

W terminalu wykonaj:

   curl http://localhost:5001/api/produkty

SprawdÅº czy stan produktu siÄ™ zmniejszyÅ‚!

TEST 3: SprawdÅº historiÄ™
-------------------------

W terminalu wykonaj:

   curl http://localhost:5001/api/historia/produkty | head -30

Powinna pojawiÄ‡ siÄ™ operacja typu "woocommerce":

   {
     "typ_operacji": "woocommerce",
     "opis": "ZamÃ³wienie WooCommerce #123 - sprzedano 2 szt.",
     ...
   }

TEST 4: SprawdÅº logi WooCommerce
---------------------------------

W WordPress:
WooCommerce â†’ Status â†’ Logi

Wybierz log webhookÃ³w i sprawdÅº czy sÄ… bÅ‚Ä™dy.

================================================================================
ğŸŒ DOSTÄ˜P Z INTERNETU (jeÅ›li sklep jest online)
================================================================================

JeÅ›li TwÃ³j sklep WooCommerce jest w internecie, a aplikacja magazynowa
jest lokalna (na Twoim komputerze), musisz udostÄ™pniÄ‡ aplikacjÄ™ w internecie.

OPCJA 1: ngrok (szybkie, do testÃ³w)
------------------------------------

1. Zainstaluj ngrok:
   brew install ngrok

2. Uruchom tunel:
   ngrok http 5001

3. Ngrok pokaÅ¼e publiczny URL, np.:
   https://abc123.ngrok.io

4. UÅ¼yj tego URL w webhooku WooCommerce:
   https://abc123.ngrok.io/api/woocommerce/webhook

OPCJA 2: Serwer VPS (produkcja)
--------------------------------

Postaw aplikacjÄ™ na serwerze VPS z publicznym IP i HTTPS.

================================================================================
ğŸ› ROZWIÄ„ZYWANIE PROBLEMÃ“W
================================================================================

PROBLEM: Webhook nie dziaÅ‚a
----------------------------

âœ“ SprawdÅº czy aplikacja dziaÅ‚a:
  curl http://localhost:5001/api/produkty

âœ“ SprawdÅº logi WooCommerce:
  WordPress â†’ WooCommerce â†’ Status â†’ Logi

âœ“ SprawdÅº czy sekret jest identyczny w .env i WooCommerce

âœ“ SprawdÅº firewall (port 5001 musi byÄ‡ otwarty)

PROBLEM: Stany siÄ™ nie aktualizujÄ…
-----------------------------------

âœ“ SprawdÅº mapowania:
  curl http://localhost:5001/api/woocommerce/mapowania

âœ“ SprawdÅº czy zamÃ³wienie ma status "completed" (ukoÅ„czone)

âœ“ SprawdÅº czy produkt ma wystarczajÄ…cy stan magazynowy

PROBLEM: "NieprawidÅ‚owy podpis"
--------------------------------

âœ“ SprawdÅº czy sekret w .env jest identyczny z WooCommerce
âœ“ UsuÅ„ spacje na poczÄ…tku/koÅ„cu sekretu
âœ“ Uruchom ponownie aplikacjÄ™ (./start.sh)

================================================================================
ğŸ“‹ PODSUMOWANIE
================================================================================

âœ… Sekret wygenerowany:    wc_secret_715a8339c6ae64451fca0b5348a57f4a
âœ… Aplikacja dziaÅ‚a na:    http://192.168.0.108:5001
âœ… Webhook URL:            http://192.168.0.108:5001/api/woocommerce/webhook

CO MUSISZ JESZCZE ZROBIÄ†:
--------------------------
â˜ SkonfigurowaÄ‡ webhook w WooCommerce (Krok 1)
â˜ ZmapowaÄ‡ produkty (Krok 4)
â˜ PrzetestowaÄ‡ z zamÃ³wieniem (Krok 6)

================================================================================
ğŸ“ POMOC
================================================================================

SzczegÃ³Å‚owa dokumentacja:
- KONFIGURACJA_SKLEPU.md
- WOOCOMMERCE_INTEGRATION.md
- QUICKSTART_WOOCOMMERCE.md

Skrypty pomocnicze:
- ./dodaj_mapowanie.sh - Å‚atwe dodawanie mapowaÅ„
- ./test_woocommerce_api.sh - testy API

================================================================================
ğŸ¯ GOTOWE!
================================================================================

Po wykonaniu tych krokÃ³w, kaÅ¼de ukoÅ„czone zamÃ³wienie w WooCommerce
automatycznie odejmie produkty ze stanu magazynowego!

Powodzenia! ğŸš€
